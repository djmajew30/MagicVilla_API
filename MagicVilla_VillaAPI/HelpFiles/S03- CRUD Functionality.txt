RESPONSE OBJECT
Status Codes for Operation Result

- 100-199: Informational

- 200-299: Success
  - 200 – OK
  - 201 – Created
  - 204 – No Content

- 300-399: Redirection

- 400-499: Client Errors
  - 400 – Bad Request
  - 404 – Not Found
  - 409 – Conflict
  

19. Status Code in EndPoints, define return type
MagicVilla_VillaAPI/Controllers/VillaAPIController.cs

use ActionResult<> to use any return type we want

        [HttpGet]
        public ActionResult<IEnumerable<VillaDTO>> GetVillas()
        {
            return Ok(VillaStore.villaList); //200 success
        }

        [HttpGet("{id:int}")]
        public ActionResult<VillaDTO>  GetVilla(int id)
        {
            //19. add validation for bad request 400
            if (id == 0)
            {
                return BadRequest(); //400
            }

            var villa = VillaStore.villaList.FirstOrDefault(u => u.Id == id);

            //19. add validation for notfound 404
            if (villa == null)
            {
                return NotFound(); //404
            }

            return Ok(villa);
        }


20. Response Types not documented in API
right now code is returned but its not documented in API
MagicVilla_VillaAPI/Controllers/VillaAPIController.cs

        [HttpGet]
        [ProducesResponseType(StatusCodes.Status200OK)]
        public ActionResult<IEnumerable<VillaDTO>> GetVillas()
        ...
        [HttpGet("{id:int}")]
        [ProducesResponseType(StatusCodes.Status200OK)]
        [ProducesResponseType(StatusCodes.Status400BadRequest)]
        [ProducesResponseType(StatusCodes.Status404NotFound)]
        //[ProducesResponseType(200, Type =typeof(VillaDTO))]
        public ActionResult<VillaDTO>  GetVilla(int id)



21. HttpPOST in Action, Add a villa in VillaStore Data Source
https://github.com/bhrugen/MagicVilla_API/commit/08a4bee751626c04637118ecb4237d68cee2adac
MagicVilla_VillaAPI/Controllers/VillaAPIController.cs

        [HttpPost]
        [ProducesResponseType(StatusCodes.Status200OK)]
        [ProducesResponseType(StatusCodes.Status400BadRequest)]
        [ProducesResponseType(StatusCodes.Status500InternalServerError)]
        public ActionResult<VillaDTO> CreateVilla([FromBody]VillaDTO villaDTO)
        {
            //add validations
            //not the right information
            if (villaDTO == null)
            {
                return BadRequest(villaDTO);
            }

            //id should be 0
            if (villaDTO.Id > 0)
            {
                return StatusCode(StatusCodes.Status500InternalServerError); 
            }

            //Get/assign new id of the villa object, max id + 1 
            villaDTO.Id = VillaStore.villaList.OrderByDescending(u => u.Id).FirstOrDefault().Id + 1;
            VillaStore.villaList.Add(villaDTO);

            return Ok(villaDTO);
        }

Start project, post and change only name, test with get methods. will not save becuase we are not using a database right now


22. CreatedAtRoute





23. ModelState Validations





24. Custom ModelState Validation





25. Http Delete in Action





26. Http PUT in action





27. Http Patch Nuget Packages





28. Http Patch in Action





29. PostMan




30. Content Negotiations



