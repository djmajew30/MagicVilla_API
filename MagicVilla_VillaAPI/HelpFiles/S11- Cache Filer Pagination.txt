https://github.com/bhrugen/MagicVilla_API/commits/master/

"userName": "testadmin@gmail.com",
"password": "Admin123"


113. Caching Request (in API proj)
https://github.com/bhrugen/MagicVilla_API/commit/a5bafcac8509a471f587ac7c5609da519a2d7201
MagicVilla_VillaAPI/Controllers/v1/VillaAPIController.cs

        [HttpGet]
        [ResponseCache(Duration = 30)] //seconds
        ...
        public async Task<ActionResult<APIResponse>> GetVillas()

MagicVilla_VillaAPI/Program.cs

	//113. Caching
	builder.Services.AddResponseCaching();
	//50. repository
	builder.Services.AddScoped<IVillaRepository, VillaRepository>();

114. Caching Profile. ex. want a rule that says all should be cached for 30 seconds.
add to program.cs
https://github.com/bhrugen/MagicVilla_API/commit/9f35d216a457d617b37aec07dca609e8fe859c1c

MagicVilla_VillaAPI/Program.cs

                    ValidateAudience = false
                };
            }); ;
            ...
        //30. content negotiations
        //builder.Services.AddControllers();
        builder.Services.AddControllers(option =>
        {
            //114 caching profile
            option.CacheProfiles.Add("Default30",
               new CacheProfile()
               {
                   Duration = 30
               });
            //option.ReturnHttpNotAcceptable = true; // commented out in 31 so swagger still works with plain text
        }).AddNewtonsoftJson().AddXmlDataContractSerializerFormatters();
        ...
        builder.Services.AddEndpointsApiExplorer();


MagicVilla_VillaAPI/Controllers/v1/VillaAPIController.cs
		[ResponseCache(CacheProfileName = "Default30")]



115. Filters in API
https://github.com/bhrugen/MagicVilla_API/commit/6d17591dcb24de3ad231c8af0f18ffc54ef28472
MagicVilla_VillaAPI/Controllers/v1/VillaAPIController.cs

        public async Task<ActionResult<APIResponse>> GetVillas([FromQuery(Name ="filterOccupancy")]int? occupancy)
        {
            try
            {

                IEnumerable<Villa> villaList;

                if (occupancy > 0)
                {
                    villaList = await _dbVilla.GetAllAsync(u => u.Occupancy == occupancy);
                }
                else
                {
                    villaList = await _dbVilla.GetAllAsync();
                }




116. Seach Villa Name






117. Pagination in API






118. Add Pagination to Response Header






119. Status Code and IsSuccess






120. Bug Fixing





